(this.webpackJsonpbarker=this.webpackJsonpbarker||[]).push([[0],{55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var c=n(3),s=n.n(c),r=n(39),a=n.n(r),i=n(10),o=n.n(i),l=n(18),u=n(5),j=n(11),d="data:image/png;base64,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";n(92),n(91),n(52);j.a.initializeApp({apiKey:"AIzaSyA07EKf301UP8ETAYs_qbbd00J9UscvFfI",authDomain:"barker-app-5af02.firebaseapp.com",projectId:"barker-app-5af02",storageBucket:"barker-app-5af02.appspot.com",messagingSenderId:"728074132045",appId:"1:728074132045:web:8a51d747cbcc465daada04"});var b=j.a.firestore(),f=j.a.auth(),m=j.a.storage(),O=n(1),p=Object(c.createContext)(),h=function(e){var t=e.children,n=Object(c.useState)(!1),s=Object(u.a)(n,2),r=s[0],a=s[1],i=Object(c.useState)(null),m=Object(u.a)(i,2),h=m[0],x=m[1],v=Object(c.useState)(""),g=Object(u.a)(v,2),N=g[0],k=g[1],y=Object(c.useState)("olyO4oe4gsYRyr1mXXayPJkkvmY2"),C=Object(u.a)(y,1)[0],w=Object(c.useState)(null),S=Object(u.a)(w,2),E=S[0],A=S[1],P=Object(c.useState)(!1),U=Object(u.a)(P,2),B=U[0],I=U[1],M=Object(c.useState)(!1),R=Object(u.a)(M,2),V=R[0],H=R[1];function F(){return(F=Object(l.a)(o.a.mark((function e(){var t,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new j.a.auth.GoogleAuthProvider,e.prev=1,e.next=4,f.signInWithPopup(t);case 4:n=e.sent,T(c=n.user),K(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),Y(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function G(){return(G=Object(l.a)(o.a.mark((function e(t){var n,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,f.signInAnonymously();case 4:return n=e.sent,c=n.user,e.next=8,c.updateProfile({displayName:N});case 8:return e.next=10,f.currentUser;case 10:T(s=e.sent,N),q(c),K(s,N),H(!1),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),Y(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})))).apply(this,arguments)}function T(e){return D.apply(this,arguments)}function D(){return(D=Object(l.a)(o.a.mark((function e(t){var n,c,s,r,a=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:null,e.prev=1,c=t.photoURL||d,s=n||t.displayName,r=b.collection("users").doc(t.uid),e.next=7,r.get();case 7:if(e.sent.exists){e.next=11;break}return e.next=11,r.set({username:s,url:c,followers:[],following:[C]});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),Y(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function q(e){e.uid!==C&&b.collection("users").doc(C).update({followers:j.a.firestore.FieldValue.arrayUnion(e.uid)}).catch((function(e){return Y(e)}))}function K(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.photoURL||d,c=t||e.displayName,s={uid:e.uid,username:c,url:n};x(s),a(!0)}function L(){return(L=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.signOut();case 3:a(!1),k(""),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.code),Y(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function X(){return(X=Object(l.a)(o.a.mark((function e(t,n,c,s){var r,a=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>4&&void 0!==a[4]?a[4]:null,t.preventDefault(),e.prev=2,e.next=5,b.collection("contents").add({uid:h.uid,username:h.username,url:h.url,type:c,text:n,timestamp:j.a.firestore.FieldValue.serverTimestamp(),comments:0,likedBy:[],rebarkedBy:[],originalPostId:r||"",imageUrl:s});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),Y(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function Y(e){if(I(!0),e.code){var t=e.code,n=e.message;"Error code: ".concat(t,". ").concat(n)}else A(e)}return Object(c.useEffect)((function(){f.onAuthStateChanged((function(e){e?K(e):a(!1)}))}),[]),Object(O.jsx)(p.Provider,{value:{anonName:N,currentUser:h,error:E,showError:B,signInModal:V,userLoggedIn:r,closeError:function(){I(!1)},follow:function(e){b.collection("users").doc(e.uid).update({followers:j.a.firestore.FieldValue.arrayUnion(h.uid)}).catch((function(e){return Y(e)})),b.collection("users").doc(h.uid).update({following:j.a.firestore.FieldValue.arrayUnion(e.uid)}).catch((function(e){return Y(e)}))},handleError:Y,logOut:function(){return L.apply(this,arguments)},setSignInModal:H,signIn:function(){return F.apply(this,arguments)},signInAnonymous:function(e){return G.apply(this,arguments)},showSignInModal:function(){H(!0)},submitPost:function(e,t,n,c){return X.apply(this,arguments)},unfollow:function(e){b.collection("users").doc(e.uid).update({followers:j.a.firestore.FieldValue.arrayRemove(h.uid)}).catch((function(e){return Y(e)})),b.collection("users").doc(h.uid).update({following:j.a.firestore.FieldValue.arrayRemove(e.uid)}).catch((function(e){return Y(e)}))},updateAnonName:function(e){k(e.target.value)}},children:t})},x=n(6),v=n(9),g=(n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(7)),N=function(){var e=Object(c.useContext)(p),t=e.currentUser,n=e.logOut;return Object(O.jsx)("header",{id:"header",children:Object(O.jsxs)("div",{className:"header-content",children:[Object(O.jsxs)("div",{className:"header-user",children:[Object(O.jsx)("div",{children:Object(O.jsx)(x.b,{to:"/profile/".concat(t.uid),children:Object(O.jsx)("img",{className:"avatar-img-small",src:t.url,alt:"user avatar"})})}),Object(O.jsx)("div",{children:Object(O.jsx)(x.b,{to:"/profile/".concat(t.uid),className:"link-username",children:Object(O.jsx)("span",{className:"username",children:t.username})})})]}),Object(O.jsx)("button",{className:"log-out-btn",onClick:n,children:"Log Out"})]})})},k=n(42),y=n(20),C=n(22),w=function(e){var t=Object(c.useContext)(p).currentUser,n=Object(v.i)().url;return Object(O.jsxs)("div",{className:"sidebar",children:[Object(O.jsx)("div",{children:Object(O.jsx)(k.a,{id:"dog-icon"})}),Object(O.jsxs)("div",{className:"menu-container",children:[Object(O.jsx)(x.c,{activeClassName:"active",exact:!0,to:"/home",children:Object(O.jsxs)("div",{className:"sidebar-option",children:[Object(O.jsx)(y.b,{className:"sidebar-icon"}),Object(O.jsx)("h3",{className:"sideb-option-name",children:"Home"})]})}),Object(O.jsx)(x.c,{to:"".concat(n,"barkers"),activeClassName:"active",children:Object(O.jsxs)("div",{className:"sidebar-option",children:[Object(O.jsx)(C.a,{className:"sidebar-icon"}),Object(O.jsx)("h3",{className:"sideb-option-name",children:"Who to follow"})]})}),Object(O.jsx)(x.c,{to:"".concat(n,"profile/").concat(t.uid),activeClassName:"active",children:Object(O.jsxs)("div",{className:"sidebar-option",children:[Object(O.jsx)(C.b,{className:"sidebar-icon"}),Object(O.jsx)("h3",{className:"sideb-option-name",children:"Your Profile"})]})})]})]})},S=function(e){var t=Object(c.useContext)(p).currentUser,n=Object(c.useState)(0),s=Object(u.a)(n,2),r=s[0],a=s[1],i=Object(c.useState)(null),j=Object(u.a)(i,2),d=j[0],b=j[1],f=Object(c.useState)(null),O=Object(u.a)(f,2),h=O[0],x=O[1];return Object(c.useEffect)((function(){if(e){var n=m.ref(t.uid).child(e.name);n.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;a(t)}),(function(e){b(e)}),Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getDownloadURL();case 2:t=e.sent,x(t);case 4:case"end":return e.stop()}}),e)}))))}}),[e,t]),{progress:r,imageUrl:h,error:d}},E=function(e){var t=e.file,n=e.setFile,s=S(t),r=s.imageUrl,a=s.progress;return Object(c.useEffect)((function(){r&&n(null)}),[r,n]),Object(O.jsx)("div",{className:"progress-bar",style:{width:a+"%"}})},A=n(31),P=function(e){var t="btn-container-right ".concat(e.btnClass);return Object(O.jsx)("div",{className:t,children:Object(O.jsx)(A.a,{className:"icon icon-close",onClick:function(t){t.stopPropagation(),e.onClick(t)}})})},U=n(37),B=function(e){var t=e.post,n=e.url?"image-container small":"image-container",c=Object(v.g)(),s=U(t.text,/(#\w+)/g,(function(e,t){return Object(O.jsx)(x.b,{to:"/hashtag/".concat(e.slice(1)),className:"hashtag-link",onClick:function(e){e.stopPropagation()},children:e},t+e)}));return Object(O.jsxs)("div",{className:"rebarked-main",id:t.id,onClick:function(e){e.stopPropagation(),c.push({pathname:"/post/".concat(t.id)})},children:[Object(O.jsxs)("div",{className:"rebarked-top",children:[Object(O.jsx)("div",{className:"rebarked-avatar-wrapper",children:Object(O.jsx)("img",{alt:"avatar",src:t.url,className:"rebarked-avatar-img"})}),Object(O.jsx)("div",{className:"username-container",children:Object(O.jsx)(x.b,{to:"/profile/".concat(t.uid),className:"link-username",onClick:function(e){e.stopPropagation()},children:Object(O.jsx)("span",{className:"username",children:t.username})})})]}),Object(O.jsx)("div",{className:"rebarked-bottom",children:Object(O.jsxs)("div",{className:"post-content",children:[Object(O.jsx)("div",{className:"post-text",children:s}),t.imageUrl&&Object(O.jsx)("div",{className:n,children:Object(O.jsx)("img",{src:t.imageUrl,alt:"upload",className:"post-img"})})]})})]})},I=n(43),M=function(e){var t=e.post,n=e.postType,s=e.form,r=e.submitFunction,a=Object(c.useContext)(p),i=a.currentUser,o=a.handleError,l=a.submitPost,j=Object(c.useState)(""),d=Object(u.a)(j,2),b=d[0],f=d[1],m=Object(c.useState)(null),h=Object(u.a)(m,2),x=h[0],v=h[1],g=S(x).imageUrl,N=Object(c.useState)(null),k=Object(u.a)(N,2),y=k[0],C=k[1],w=["image/png","image/jpeg"],A="file-".concat(s),U=r||l,M="form-wrapper ".concat(s);return Object(c.useEffect)((function(){"edit"===s?(t&&f(t.text),t.imageUrl&&!g?C(t.imageUrl):g&&C(g)):g&&C(g)}),[g,t,s]),Object(O.jsxs)("div",{className:M,children:[Object(O.jsx)("div",{className:"left-side",children:Object(O.jsx)("div",{className:"user-info",children:Object(O.jsx)("img",{alt:"pic",src:i.url,className:"avatar-img"})})}),Object(O.jsxs)("div",{className:"form-right-side",children:["comment"===s&&Object(O.jsx)("div",{className:"top-space"}),Object(O.jsx)("div",{className:"form-container",children:Object(O.jsxs)("form",{className:"post-input-form",onSubmit:function(e){e.stopPropagation(),U(e,b,n,y),f(""),C(null)},children:[Object(O.jsx)("textarea",{className:"post-textarea",onChange:function(e){f(e.target.value)},onClick:function(e){return e.stopPropagation()},value:b,placeholder:"Bark what's on your mind!"}),y&&Object(O.jsxs)("div",{className:"form-image-container",children:[Object(O.jsx)("img",{src:y,alt:"uploaded",className:"input-form-img"}),Object(O.jsx)(P,{btnClass:"discard-btn-container",onClick:function(e){e.stopPropagation(),C(null)}})]}),"rebark"===s&&Object(O.jsx)(B,{post:t,url:y}),Object(O.jsxs)("div",{className:"form-footer",children:[Object(O.jsxs)("div",{className:"image-input",onClick:function(e){return e.stopPropagation()},children:[Object(O.jsx)("label",{htmlFor:A,className:"custom-file-upload",children:Object(O.jsx)(I.a,{id:"image-upload-icon"})}),Object(O.jsx)("input",{id:A,type:"file",onChange:function(e){var t=e.target.files[0];if(t&&w.includes(t.type))v(t);else{v(null);o("Please select an image (png or jpeg)")}},onClick:function(e){e.stopPropagation(),e.target.value=null}})]}),x&&Object(O.jsx)(E,{file:x,setFile:v}),Object(O.jsx)("div",{className:"input-btn-div",children:Object(O.jsx)("button",{type:"submit",onClick:function(e){return e.stopPropagation()},children:"Bark"})})]})]})})]})]})},R=n(37),V=function(e){var t=e.post,n=e.view,s=e.deletePost,r=e.openEditModal,a=e.redirect,i=e.modal,o=e.originalPost,l=Object(c.useContext)(p).currentUser,u=i||"",j=n?"".concat(n,"-main ").concat(u):"post-main ".concat(u),d=R(t.text,/(#\w+)/g,(function(e,t){return Object(O.jsx)(x.b,{to:"/hashtag/".concat(e.slice(1)),className:"hashtag-link",onClick:function(e){e.stopPropagation()},children:e},t+e)}));return Object(O.jsxs)("div",{className:j,id:t.id,onClick:a,children:[Object(O.jsxs)("div",{className:"left-side",children:[Object(O.jsx)("div",{className:"modal-avatar-wrapper",children:Object(O.jsx)("img",{alt:"avatar",src:t.url,className:"avatar-img"})}),("comment"===i||"comm-post-profile"===n)&&Object(O.jsx)("div",{className:"connection-line"})]}),Object(O.jsxs)("div",{className:"right-side",children:[Object(O.jsxs)("div",{className:"post-right-top",children:[Object(O.jsx)("div",{className:"username-container",children:Object(O.jsx)(x.b,{to:"/profile/".concat(t.uid),className:"link-username",onClick:function(e){e.stopPropagation()},children:Object(O.jsx)("span",{className:"username",children:t.username})})}),l.uid===t.uid&&"rebarked"!==n&&!i&&Object(O.jsxs)("div",{className:"post-right-icons",children:[Object(O.jsx)("div",{children:Object(O.jsx)(C.c,{className:"icon",onClick:function(e){e.stopPropagation(),s()}})}),Object(O.jsx)("div",{children:Object(O.jsx)(A.b,{className:"icon",onClick:function(e){e.stopPropagation(),r()}})})]})]}),Object(O.jsxs)("div",{className:"post-content",children:[Object(O.jsx)("div",{className:"post-text",children:d}),t.imageUrl&&"comment"!==i&&Object(O.jsx)("div",{className:"image-container",children:Object(O.jsx)("img",{src:t.imageUrl,alt:"upload",className:"post-img"})}),o&&Object(O.jsx)(B,{post:o,redirect:a})]})]})]})},H=function(e){var t=e.likedByUser,n=e.rebarkedByUser,c=e.openCommentModal,s=e.openRebarkModal,r=e.commentNumber,a=e.likesNumber,i=e.rebarkNum,o=e.clickLike,l=t?"active":"",u=n?"active":"";return Object(O.jsxs)("div",{className:"post-footer",children:[Object(O.jsxs)("div",{className:"post-icon-div",children:[Object(O.jsx)(y.d,{className:"footer-icon",title:"Reply",onClick:function(e){e.stopPropagation(),c()}}),Object(O.jsx)("div",{children:r})]}),Object(O.jsxs)("div",{className:"post-icon-div",children:[Object(O.jsx)(y.c,{className:"footer-icon ".concat(l),title:"Like",onClick:function(e){e.stopPropagation(),o()}}),Object(O.jsx)("div",{className:l,children:a})]}),Object(O.jsxs)("div",{className:"post-icon-div",children:[Object(O.jsx)(y.e,{className:"footer-icon ".concat(u),title:"Rebark",onClick:function(e){e.stopPropagation(),s()}}),Object(O.jsx)("div",{className:u,children:i})]})]})},F=function(e){var t=e.user,n=e.users,s=Object(c.useContext)(p),r=s.follow,a=s.unfollow,i=s.currentUser,o=n.find((function(e){return e.uid===i.uid})).following.includes(t.uid);return Object(O.jsxs)("div",{className:"user-tile",children:[Object(O.jsxs)("div",{className:"user-info",children:[Object(O.jsx)("img",{alt:"pic",src:t.url,className:"avatar-img-small"}),Object(O.jsx)(x.b,{to:"/profile/".concat(t.uid),className:"link-username",onClick:function(e){e.stopPropagation()},children:Object(O.jsx)("span",{className:"username",children:t.username})})]}),t.uid!==i.uid&&o&&Object(O.jsx)("button",{className:"follow-action-btn",onClick:function(){return a(t)},children:"Unfollow"}),t.uid!==i.uid&&!o&&Object(O.jsx)("div",{children:Object(O.jsx)("button",{className:"follow-action-btn",onClick:function(){return r(t)},children:"Follow"})})]})},G=function(e){var t=e.interactions,n=e.users;return Object(O.jsx)("div",{className:"extras-modal",children:Object(O.jsxs)("div",{className:"modal-main",children:[Object(O.jsx)(P,{onClick:e.onClick}),Object(O.jsx)("div",{className:"extras-tiles-container",children:t.map((function(e){return Object(O.jsx)(F,{user:e,users:n},e.uid)}))})]})})},T=function(e){var t=e.post,n=e.users,s=e.likesNumber,r=e.rebarkNum,a=Object(c.useState)(!1),i=Object(u.a)(a,2),o=i[0],l=i[1],j=Object(c.useState)(!1),d=Object(u.a)(j,2),b=d[0],f=d[1],m=Object(c.useState)(null),p=Object(u.a)(m,2),h=p[0],x=p[1],v=Object(c.useState)(null),g=Object(u.a)(v,2),N=g[0],k=g[1];return Object(c.useEffect)((function(){if(t.rebarkedBy){var e=[];t.rebarkedBy.forEach((function(t){for(var c=0;c<n.length;c++)t===n[c].uid&&e.push(n[c])})),x(e)}}),[t.rebarkedBy,n]),Object(c.useEffect)((function(){if(t.likedBy){var e=[];t.likedBy.forEach((function(t){for(var c=0;c<n.length;c++)t===n[c].uid&&e.push(n[c])})),k(e)}}),[t.likedBy,n]),Object(O.jsxs)("div",{className:"extras-container",children:[Object(O.jsxs)("ul",{className:"extras",children:[r>0&&Object(O.jsxs)("li",{onClick:function(e){e.stopPropagation(),l(!0)},children:[r," rebarks"]}),s>0&&Object(O.jsxs)("li",{onClick:function(e){e.stopPropagation(),f(!0)},children:[s," likes"]})]}),o&&Object(O.jsx)(G,{onClick:function(){return l(!1)},interactions:h,users:n}),b&&Object(O.jsx)(G,{onClick:function(){return f(!1)},interactions:N,users:n})]})},D=function(e){var t=e.post,n=e.submitComment,c=e.closeCommentModal;return Object(O.jsx)("div",{className:"modal",children:Object(O.jsxs)("section",{className:"input-modal-main",children:[Object(O.jsx)(P,{onClick:c,btnClass:"close-btn-bottom"}),Object(O.jsx)(V,{post:t,modal:"comment"}),Object(O.jsx)(M,{post:t,submitFunction:n,postType:"comment",form:"comment"})]})})},q=function(e){var t=e.post,n=e.closeRebarkModal,c=e.submitRebark;return Object(O.jsx)("div",{className:"modal",children:Object(O.jsxs)("section",{className:"input-modal-main",children:[Object(O.jsx)(P,{onClick:n,btnClass:"close-btn-bottom"}),Object(O.jsx)(M,{post:t,submitFunction:c,postType:"rebark",form:"rebark"})]})})},K=function(e){var t=e.post,n=e.closeEditModal,c=e.submitEdit;return Object(O.jsx)("div",{className:"modal",children:Object(O.jsxs)("section",{className:"input-modal-main",children:[Object(O.jsx)(P,{onClick:n,btnClass:"close-btn-bottom"}),Object(O.jsx)(M,{post:t,submitFunction:c,postType:t.type,form:"edit"})]})})},L=function(e){var t=e.contents,n=e.post,s=e.view,r=e.users,a=Object(c.useContext)(p),i=a.currentUser,d=a.handleError,f=a.submitPost,m=Object(c.useState)(!1),h=Object(u.a)(m,2),x=h[0],g=h[1],N=Object(c.useState)(!1),k=Object(u.a)(N,2),y=k[0],C=k[1],w=Object(c.useState)(!1),S=Object(u.a)(w,2),E=S[0],A=S[1],P=Object(c.useState)(null),U=Object(u.a)(P,2),B=U[0],I=U[1],M=Object(c.useState)(!1),R=Object(u.a)(M,2),F=R[0],G=R[1],L=Object(c.useState)(!1),X=Object(u.a)(L,2),Y=X[0],Z=X[1],Q=n.comments>0?n.comments:"",W=n.likedBy.length>0?n.likedBy.length:"",J=n.rebarkedBy.length>0?n.rebarkedBy.length:"",z=s?"".concat(s,"-container clickable"):"post-container clickable",_=Object(v.g)(),$=function(e){_.push({pathname:"/post/".concat(n.id)})};function ee(){return(ee=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b.collection("contents").doc(n.id).update({comments:j.a.firestore.FieldValue.increment(1)}).catch((function(e){return d(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=Object(l.a)(o.a.mark((function e(t,c){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.collection("contents").doc(n.id);case 3:return s=e.sent,e.next=6,s.update({text:t,imageUrl:c});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),d(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ne(){return(ne=Object(l.a)(o.a.mark((function e(){var c,s,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.collection("contents").doc(n.id);case 3:if(c=e.sent,"rebark"!==n.type&&"comment"!==n.type){e.next=18;break}if(!(s=t.find((function(e){return e.id===n.originalPostId})))){e.next=18;break}return e.next=9,b.collection("contents").doc(s.id);case 9:if(r=e.sent,"rebark"!==n.type){e.next=16;break}return e.next=13,r.update({rebarkedBy:j.a.firestore.FieldValue.arrayRemove(i.uid)});case 13:Z(!1),e.next=18;break;case 16:return e.next=18,r.update({comments:j.a.firestore.FieldValue.increment(-1)});case 18:c.delete(),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),d(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){var e;"rebark"===n.type&&t&&(e=t.find((function(e){return e.id===n.originalPostId}))),I(e)}()}),[t,n.originalPostId,n.type]),Object(c.useEffect)((function(){n.likedBy.length>0&&n.likedBy.includes(i.uid)&&G(!0),n.rebarkedBy.length>0?n.rebarkedBy.includes(i.uid)&&Z(!0):Z(!1)}),[i.uid,n.likedBy,n.rebarkedBy]),Object(O.jsxs)("div",{className:z,id:n.id,onClick:$,children:[Object(O.jsx)(V,{post:n,view:s,deletePost:function(){return ne.apply(this,arguments)},openEditModal:function(){A(!0)},redirect:$,originalPost:B}),(W||J)&&r&&Object(O.jsx)(T,{users:r,post:n,likesNumber:W,rebarkNum:J}),Object(O.jsx)(H,{clickLike:function(){var e=b.collection("contents").doc(n.id);n.likedBy.includes(i.uid)?(e.update({likedBy:j.a.firestore.FieldValue.arrayRemove(i.uid)}).catch((function(e){return d(e)})),G(!1)):e.update({likedBy:j.a.firestore.FieldValue.arrayUnion(i.uid)}).catch((function(e){return d(e)}))},commentNumber:Q,likesNumber:W,rebarkNum:J,openRebarkModal:function(){n.rebarkedBy.includes(i.uid)||C(!0)},openCommentModal:function(){g(!0)},likedByUser:F,rebarkedByUser:Y}),x&&Object(O.jsx)(D,{post:n,submitComment:function(e,t,c,s){e.preventDefault(),function(){ee.apply(this,arguments)}(),f(e,t,c,s,n.id),g(!1)},closeCommentModal:function(){g(!1)}}),y&&Object(O.jsx)(q,{post:n,submitRebark:function(e,t,c,s){e.preventDefault(),b.collection("contents").doc(n.id).update({rebarkedBy:j.a.firestore.FieldValue.arrayUnion(i.uid)}).catch((function(e){return d(e)})),f(e,t,c,s,n.id),C(!1)},closeRebarkModal:function(){C(!1)}}),E&&Object(O.jsx)(K,{post:n,submitEdit:function(e,t,n,c){e.preventDefault(),function(e,t){te.apply(this,arguments)}(t,c),A(!1)},closeEditModal:function(){A(!1)}})]})},X=function(e){var t=e.contents,n=e.posts,s=e.users,r=Object(c.useContext)(p).currentUser,a=Object(c.useState)(null),i=Object(u.a)(a,2),o=i[0],l=i[1],j=Object(c.useState)(null),d=Object(u.a)(j,2),b=d[0],f=d[1];return Object(c.useEffect)((function(){var e=s.find((function(e){return e.uid===r.uid}));f(e)}),[r.uid,s]),Object(c.useEffect)((function(){if(b){var e=n.filter((function(e){return b.following.includes(e.uid)||e.uid===b.uid}));l(e)}}),[n,b]),Object(O.jsx)("div",{className:"posts-container",children:o&&o.map((function(e){return Object(O.jsx)(L,{post:e,contents:t,view:"post"},e.id)}))})},Y=function(e){var t=e.contents,n=e.posts,c=e.users;return Object(O.jsxs)("div",{className:"center-container",children:[Object(O.jsx)(M,{form:"input",postType:"post"}),Object(O.jsx)(X,{contents:t,posts:n,users:c})]})},Z=function(e){var t=e.contents,n=Object(v.h)().uid,c=e.posts.filter((function(e){return e.uid===n}));return Object(O.jsx)("div",{className:"posts-container",children:c.map((function(e){return Object(O.jsx)(L,{post:e,contents:t},e.id)}))})},Q=function(e){var t=Object(v.h)().uid,n=e.contents.filter((function(e){return e.likedBy.includes(t)}));return Object(O.jsx)("div",{className:"posts-container",children:n.map((function(e){return Object(O.jsx)(L,{post:e},e.id)}))})},W=n(45),J=function(e){var t=e.uid,n=e.contents,s=Object(c.useContext)(p).handleError,r=Object(c.useState)(),a=Object(u.a)(r,2),i=a[0],o=a[1];return Object(c.useEffect)((function(){var e=b.collection("contents").where("type","==","comment").where("uid","==",t).orderBy("timestamp","asc").onSnapshot((function(e){!function(e){for(var c=[],s=[],r={},a=function(a){e&&(c=e.filter((function(e){return e.uid===t&&e.originalPostId===n[a].id}))).length>0&&(r=Object(g.a)(Object(g.a)({},n[a]),{},{commentData:Object(W.a)(c)}),s.push(r))},i=0;i<n.length;i++)a(i);o(s)}(e.docs.map((function(e){return Object(g.a)({id:e.id},e.data())})))}),(function(e){s(e)}));return function(){return e()}}),[s,n,t]),Object(O.jsx)("div",{className:"posts-container",children:i&&i.map((function(e){return Object(O.jsxs)("div",{className:"post-w-comments-container",children:[Object(O.jsx)(L,{post:e,contents:n,view:"profile-post"}),e.commentData.map((function(e){return Object(O.jsx)(L,{post:e,contents:n,view:"comment"},e.id)}))]},e.id)}))})},z=function(e){var t=e.contents,n=e.users,s=e.posts,r=Object(c.useContext)(p),a=r.currentUser,i=r.follow,o=r.unfollow,l=Object(v.h)().uid,u=Object(v.i)(),j=u.url,d=u.path,b=n.find((function(e){return e.uid===l})),f=n.find((function(e){return e.uid===a.uid})).following.includes(b.uid);return Object(O.jsxs)("div",{className:"center-container",children:[Object(O.jsxs)("div",{className:"info-container",children:[Object(O.jsx)("div",{className:"profile-pic-div",children:Object(O.jsx)("img",{alt:"pic",src:b.url,className:"profile-pic"})}),Object(O.jsxs)("div",{className:"info-center",children:[Object(O.jsx)("h2",{className:"bio-username",children:b.username}),b.uid!==a.uid&&f&&Object(O.jsx)("button",{onClick:function(){return o(b)},children:"Unfollow"}),b.uid!==a.uid&&!f&&Object(O.jsx)("button",{onClick:function(){return i(b)},children:"Follow"})]}),Object(O.jsxs)("div",{className:"follow-numbers",children:[Object(O.jsx)(x.b,{to:"/".concat(l,"/follow-page"),children:Object(O.jsxs)("div",{children:[b.following.length," following"]})}),Object(O.jsx)(x.b,{to:"/".concat(l,"/follow-page/followers"),children:Object(O.jsxs)("div",{className:"followers",children:[b.followers.length," followers"]})})]}),Object(O.jsxs)("div",{className:"profile-tabs-container",children:[Object(O.jsx)(x.c,{to:"".concat(j),exact:!0,activeClassName:"active",children:Object(O.jsx)("div",{children:"Barks"})}),Object(O.jsx)(x.c,{to:"".concat(j,"/comments"),activeClassName:"active",children:Object(O.jsx)("div",{children:"Comments"})}),Object(O.jsx)(x.c,{to:"".concat(j,"/likes"),activeClassName:"active",children:Object(O.jsx)("div",{children:"Likes"})})]})]}),Object(O.jsxs)(v.d,{children:[Object(O.jsx)(v.b,{exact:!0,path:"".concat(d),render:function(e){return Object(O.jsx)(Z,Object(g.a)(Object(g.a)({},e),{},{contents:t,posts:s}))}}),Object(O.jsx)(v.b,{path:"".concat(d,"/comments"),render:function(e){return Object(O.jsx)(J,Object(g.a)(Object(g.a)({},e),{},{contents:t,uid:l}))}}),Object(O.jsx)(v.b,{path:"".concat(d,"/likes"),render:function(e){return Object(O.jsx)(Q,Object(g.a)(Object(g.a)({},e),{},{contents:t}))}})]})]})},_=function(e){return Object(O.jsx)("div",{className:"arrow-left-container",children:Object(O.jsx)(y.a,{id:"arrow-left",onClick:e.onClick})})},$=function(e){var t=Object(c.useContext)(p).handleError,n=Object(v.h)().id,s=e.history,r=e.contents,a=e.users,i=Object(c.useState)(null),o=Object(u.a)(i,2),l=o[0],j=o[1],d=r.find((function(e){return e.id===n}));return console.log(l),Object(c.useEffect)((function(){var e=b.collection("contents").where("type","==","comment").where("originalPostId","==",n).orderBy("timestamp","asc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(g.a)({id:e.id},e.data())}));t.length>0&&j(t)}),(function(e){t(e)}));return function(){return e()}}),[t,n]),Object(c.useEffect)((function(){d||s.goBack()}),[d,s]),Object(O.jsxs)("div",{className:"center-container",children:[Object(O.jsx)(_,{onClick:function(){return s.goBack()}}),d&&Object(O.jsxs)("div",{className:"post-w-comments-container",children:[Object(O.jsx)(L,{post:d,contents:r,view:"comm-post",users:a}),l&&Object(O.jsx)("div",{className:"separation-bloc"}),l&&l.map((function(e){return Object(O.jsx)(L,{post:e,contents:r,view:"comment"},e.id)}))]},d.id)]})},ee=function(e){var t=e.users,n=Object(c.useContext)(p).currentUser;return Object(O.jsx)("div",{className:"center-container",children:t.filter((function(e){return e.uid!==n.uid})).map((function(e){return Object(O.jsx)(F,{user:e,users:t},e.uid)}))})},te=n(44),ne=function(e){var t=e.users,n=Object(v.h)().uid,s=Object(c.useContext)(p).currentUser,r=t.find((function(e){return e.uid===s.uid})),a=t.find((function(e){return e.uid===n})),i=[];return a.following.forEach((function(e){for(var n=0;n<t.length;n++)t[n].uid===e&&i.push(t[n])})),Object(O.jsx)("div",{className:"tiles-container",children:i.map((function(e){return Object(O.jsx)(F,{user:e,users:t,currUser:r},e.uid)}))})},ce=function(e){var t=e.users,n=Object(v.h)().uid,s=Object(c.useContext)(p).currentUser,r=t.find((function(e){return e.uid===s.uid})),a=t.find((function(e){return e.uid===n})),i=[];return a.followers.forEach((function(e){for(var n=0;n<t.length;n++)t[n].uid===e&&i.push(t[n])})),Object(O.jsx)("div",{className:"tiles-container",children:i.map((function(e){return Object(O.jsx)(F,{user:e,users:t,currUser:r},e.uid)}))})},se=function(e){var t=e.history,n=e.users,c=Object(v.h)().uid,s=Object(v.i)(),r=s.url,a=s.path,i=n.find((function(e){return e.uid===c}));return Object(O.jsxs)("div",{className:"center-container",children:[Object(O.jsx)("div",{className:"arrow-left-container",children:Object(O.jsx)(te.a,{id:"arrow-left",onClick:function(){return t.goBack()}})}),Object(O.jsx)("h2",{children:i.username}),Object(O.jsxs)("div",{className:"profile-tabs-container",children:[Object(O.jsx)(x.c,{to:"".concat(r),exact:!0,activeClassName:"active",children:Object(O.jsx)("div",{children:"Following"})}),Object(O.jsx)(x.c,{to:"".concat(r,"/followers"),activeClassName:"active",children:Object(O.jsx)("div",{children:"Followers"})})]}),Object(O.jsxs)(v.d,{children:[Object(O.jsx)(v.b,{exact:!0,path:"".concat(a),render:function(e){return Object(O.jsx)(ne,Object(g.a)(Object(g.a)({},e),{},{users:n}))}}),Object(O.jsx)(v.b,{path:"".concat(a,"/followers"),render:function(e){return Object(O.jsx)(ce,Object(g.a)(Object(g.a)({},e),{},{users:n}))}})]})]})},re=function(){var e=Object(c.useContext)(p).currentUser,t=Object(v.i)().url;return Object(O.jsxs)("div",{className:"footer-nav",children:[Object(O.jsx)(x.c,{activeClassName:"active",exact:!0,to:"/home",children:Object(O.jsx)("div",{className:"nav-option",children:Object(O.jsx)(y.b,{className:"nav-icon"})})}),Object(O.jsx)(x.c,{activeClassName:"active",to:"".concat(t,"barkers"),children:Object(O.jsx)("div",{className:"nav-option",children:Object(O.jsx)(C.a,{className:"nav-icon"})})}),Object(O.jsx)(x.c,{to:"".concat(t,"profile/").concat(e.uid),children:Object(O.jsx)("div",{className:"nav-option",children:Object(O.jsx)(C.b,{className:"nav-icon"})})})]})},ae=function(e){var t=e.contents,n=e.history,c=Object(v.h)().hashtag,s=t.filter((function(e){return e.text.includes("#".concat(c))}));return Object(O.jsxs)("div",{className:"center-container",children:[Object(O.jsx)(_,{onClick:function(){return n.goBack()}}),Object(O.jsx)("div",{className:"posts-container",children:s.map((function(e){return Object(O.jsx)(L,{post:e,contents:t},e.id)}))})]})},ie=function(){var e=Object(c.useContext)(p).handleError,t=Object(v.i)().path,n=Object(c.useState)([]),s=Object(u.a)(n,2),r=s[0],a=s[1],i=Object(c.useState)([]),o=Object(u.a)(i,2),l=o[0],j=o[1],d=Object(c.useState)([]),f=Object(u.a)(d,2),m=f[0],h=f[1];return Object(c.useEffect)((function(){var t=b.collection("contents").orderBy("timestamp","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(g.a)({id:e.id},e.data())}));a(t);var n=t.filter((function(e){return"post"===e.type||"rebark"===e.type}));j(n)}),(function(t){e(t)}));return function(){return t()}}),[e]),Object(c.useEffect)((function(){var t=b.collection("users").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(g.a)({uid:e.id},e.data())}));h(t)}),(function(t){e(t)}));return function(){return t()}}),[e]),Object(O.jsxs)("div",{className:"home-container",children:[Object(O.jsx)(N,{}),Object(O.jsxs)("div",{className:"app-container",children:[Object(O.jsx)(w,{}),Object(O.jsxs)(v.d,{children:[Object(O.jsx)(v.b,{exact:!0,path:"/home",render:function(e){return Object(O.jsx)(Y,Object(g.a)(Object(g.a)({},e),{},{contents:r,posts:l,users:m}))}}),Object(O.jsx)(v.b,{path:"".concat(t,"profile/:uid"),render:function(e){return Object(O.jsx)(z,Object(g.a)(Object(g.a)({},e),{},{contents:r,posts:l,users:m}))}}),Object(O.jsx)(v.b,{path:"".concat(t,":uid/follow-page"),render:function(e){return Object(O.jsx)(se,Object(g.a)(Object(g.a)({},e),{},{users:m}))}}),Object(O.jsx)(v.b,{path:"".concat(t,"barkers"),render:function(e){return Object(O.jsx)(ee,Object(g.a)(Object(g.a)({},e),{},{users:m}))}}),Object(O.jsx)(v.b,{path:"".concat(t,"post/:id"),render:function(e){return Object(O.jsx)($,Object(g.a)(Object(g.a)({},e),{},{contents:r,users:m}))}}),Object(O.jsx)(v.b,{path:"".concat(t,"hashtag/:hashtag"),render:function(e){return Object(O.jsx)(ae,Object(g.a)(Object(g.a)({},e),{},{contents:r}))}})]})]}),Object(O.jsx)(re,{})]})},oe=function(){var e=Object(c.useContext)(p),t=e.signInAnonymous,n=e.setSignInModal,s=e.updateAnonName;return Object(O.jsx)("div",{className:"modal",children:Object(O.jsxs)("section",{className:"modal-main",children:[Object(O.jsx)(P,{onClick:function(){return n(!1)}}),Object(O.jsx)("div",{className:"sign-in-form-container",children:Object(O.jsxs)("form",{className:"sign-in-form",onSubmit:t,children:[Object(O.jsx)("input",{type:"text",placeholder:"choose a username",onChange:s,required:!0}),Object(O.jsx)("button",{type:"submit",className:"sign-in-btn",children:"Sign In Anonymously"})]})})]})})},le=function(){var e=Object(c.useContext)(p),t=e.signIn,n=e.showSignInModal,s=e.signInModal;return Object(O.jsxs)("div",{id:"login-page",children:[Object(O.jsxs)("div",{className:"welcome-box",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Welcome to Barker!"}),Object(O.jsx)("p",{children:"Sign In to access the Barker world!"})]}),Object(O.jsxs)("div",{className:"btns-container",children:[Object(O.jsx)("button",{onClick:t,children:"Log in with Google"}),Object(O.jsx)("button",{onClick:n,children:"Log In Anonimously"})]})]}),s&&Object(O.jsx)(oe,{})]})},ue=function(){var e=Object(c.useContext)(p),t=e.error,n=e.closeError;return Object(O.jsx)("div",{className:"modal",children:Object(O.jsxs)("section",{className:"modal-main",children:[Object(O.jsx)(P,{onClick:n}),Object(O.jsxs)("div",{className:"error-container",children:[Object(O.jsx)("div",{className:"error-message",children:t}),Object(O.jsx)("button",{onClick:n,children:"OK"})]})]})})};var je=function(){var e=Object(c.useContext)(p),t=e.userLoggedIn,n=e.showError;return Object(O.jsxs)(x.a,{children:[Object(O.jsx)(v.b,{exact:!0,path:"/login",children:t?Object(O.jsx)(v.a,{to:"/home"}):Object(O.jsx)(le,{})}),Object(O.jsxs)(v.b,{path:"/",children:[t?Object(O.jsx)(ie,{}):Object(O.jsx)(v.a,{to:"/login"})," "]}),n&&Object(O.jsx)(ue,{})]})};a.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(h,{children:Object(O.jsx)(je,{})})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.18d70de9.chunk.js.map