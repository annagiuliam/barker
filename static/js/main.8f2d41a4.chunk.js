(this.webpackJsonpbarker=this.webpackJsonpbarker||[]).push([[0],{46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var c=n(3),r=n.n(c),s=n(32),i=n.n(s),o=n(12),a=n.n(o),u=n(20),l=n(8),j=n(14),d=(n(61),n(60),n(43),j.a.initializeApp({apiKey:"AIzaSyA07EKf301UP8ETAYs_qbbd00J9UscvFfI",authDomain:"barker-app-5af02.firebaseapp.com",projectId:"barker-app-5af02",storageBucket:"barker-app-5af02.appspot.com",messagingSenderId:"728074132045",appId:"1:728074132045:web:8a51d747cbcc465daada04"})),b="data:image/png;base64,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",f=n(2),O=d.firestore(),p=d.auth(),m=Object(c.createContext)(),h=function(e){var t=e.children,n=Object(c.useState)(!1),r=Object(l.a)(n,2),s=r[0],i=r[1],o=Object(c.useState)(""),d=Object(l.a)(o,2),h=d[0],x=d[1],v=Object(c.useState)({}),g=Object(l.a)(v,2),k=g[0],N=g[1],y=Object(c.useState)(null),w=Object(l.a)(y,2),S=w[0],C=w[1],A=Object(c.useState)(!1),E=Object(l.a)(A,2),I=E[0],R=E[1],H=Object(c.useState)(!1),V=Object(l.a)(H,2),G=V[0],M=V[1];function P(){return(P=Object(u.a)(a.a.mark((function e(){var t,n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new j.a.auth.GoogleAuthProvider,e.prev=1,e.next=4,p.signInWithPopup(t);case 4:n=e.sent,T(c=n.user),U(c),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0.code),q(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function B(){return(B=Object(u.a)(a.a.mark((function e(t){var n,c,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,p.signInAnonymously();case 4:return n=e.sent,c=n.user,e.next=8,c.updateProfile({displayName:h});case 8:return e.next=10,p.currentUser;case 10:return r=e.sent,e.next=13,T(r,h);case 13:return e.next=15,U(r,h);case 15:M(!1),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0.code),q(e.t0);case 22:case"end":return e.stop()}}),e,null,[[1,18]])})))).apply(this,arguments)}function T(e){return D.apply(this,arguments)}function D(){return(D=Object(u.a)(a.a.mark((function e(t){var n,c,r,s,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:null,e.prev=1,c=t.photoURL||b,r=n||t.displayName,s=O.collection("users").doc(t.uid),e.next=7,s.get();case 7:if(e.sent.exists){e.next=12;break}return e.next=11,s.set({username:r,url:c,followers:[],following:["olyO4oe4gsYRyr1mXXayPJkkvmY2"]});case 11:console.log("succesfully added to user collection");case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0.code),q(e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.photoURL||b,c=t||e.displayName,r={uid:e.uid,username:c,url:n};N(r),i(!0)}function F(){return(F=Object(u.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.signOut();case 3:i(!1),x(""),console.log("logged out"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.code),q(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function K(){return(K=Object(u.a)(a.a.mark((function e(t,n,c){var r,s=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>3&&void 0!==s[3]?s[3]:null,t.preventDefault(),e.prev=2,e.next=5,O.collection("contents").add({uid:k.uid,username:k.username,url:k.url,type:c,text:n,timestamp:j.a.firestore.FieldValue.serverTimestamp(),comments:0,likes:0,likedBy:[],rebarkedBy:[],originalPostId:r||""});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0.code),q(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function q(e){R(!0);var t=e.code,n=e.message,c="Error code: ".concat(t,". ").concat(n);C(c)}return Object(c.useEffect)((function(){p.onAuthStateChanged((function(e){e?U(e):i(!1)}))}),[]),Object(f.jsx)(m.Provider,{value:{anonName:h,error:S,showError:I,signInModal:G,userInfo:k,userLoggedIn:s,closeError:function(){R(!1)},handleError:q,logOut:function(){return F.apply(this,arguments)},signIn:function(){return P.apply(this,arguments)},signInAnonymous:function(e){return B.apply(this,arguments)},showSignInModal:function(){M(!0)},submitPost:function(e,t,n){return K.apply(this,arguments)},updateAnonName:function(e){x(e.target.value)}},children:t})},x=n(6),v=n(9),g=(n(46),n(47),n(48),n(49),n(50),n(51),n(5)),k=function(){var e=Object(c.useContext)(m),t=e.userInfo,n=e.logOut;return Object(f.jsxs)("header",{id:"header",children:[Object(f.jsx)("div",{children:Object(f.jsx)("img",{className:"avatar-img",src:t.url,alt:"user avatar"})}),Object(f.jsx)(x.b,{to:"/profile/".concat(t.uid),className:"link-username",children:Object(f.jsx)("span",{className:"username",children:t.username})}),Object(f.jsx)("button",{onClick:n,children:"Log Out"})]})},N=n(35),y=function(){var e=Object(c.useContext)(m).userInfo,t=Object(v.h)().url;return Object(f.jsxs)("div",{className:"sidebar",children:[Object(f.jsx)(N.a,{id:"dog-icon"}),Object(f.jsxs)("ul",{children:[Object(f.jsx)(x.b,{to:"/home",children:Object(f.jsx)("li",{children:"Home"})}),Object(f.jsx)(x.b,{to:"".concat(t,"barkers"),children:Object(f.jsx)("li",{children:"Other barkers"})}),Object(f.jsx)(x.b,{to:"".concat(t,"profile/").concat(e.uid),children:Object(f.jsx)("li",{children:"Your profile"})})]})]})},w=function(){var e=Object(c.useContext)(m),t=e.userInfo,n=e.submitPost,r=Object(c.useState)(""),s=Object(l.a)(r,2),i=s[0],o=s[1];return Object(f.jsxs)("div",{className:"post-input",children:[Object(f.jsx)("div",{className:"user-info",children:Object(f.jsx)("img",{alt:"pic",src:t.url,className:"avatar-img"})}),Object(f.jsx)("div",{className:"form-container",children:Object(f.jsxs)("form",{className:"post-input-form",onSubmit:function(e){n(e,i,"post","posts"),o("")},children:[Object(f.jsx)("textarea",{onChange:function(e){o(e.target.value)},value:i,placeholder:"Bark what's on your mind!"}),Object(f.jsx)("div",{className:"input-btn-div",children:Object(f.jsx)("button",{type:"submit",children:"Bark"})})]})})]})},S=function(e){var t=e.post,n=e.view,c=n?"".concat(n,"-main"):"post-main";return Object(f.jsxs)("div",{className:c,id:t.id,children:[Object(f.jsxs)("div",{className:"user-info",children:[Object(f.jsx)("img",{alt:"pic",src:t.url,className:"avatar-img"}),Object(f.jsx)(x.b,{to:"/profile/".concat(t.uid),className:"link-username",children:Object(f.jsx)("span",{className:"username",children:t.username})})]}),Object(f.jsx)(x.b,{to:"/post/".concat(t.id),className:"link-text-content",children:Object(f.jsx)("div",{className:"post-content",children:t.text})})]})},C=n(27),A=function(e){var t=e.displayComment,n=e.displayRebark,c=e.commentNumber,r=e.likesNumber,s=e.rebarkNum,i=e.addLike;return Object(f.jsxs)("div",{className:"post-footer",children:[Object(f.jsxs)("div",{className:"post-icon-div",children:[Object(f.jsx)(C.b,{className:"post-icon",title:"Reply",onClick:t}),Object(f.jsx)("div",{children:c})]}),Object(f.jsxs)("div",{className:"post-icon-div",children:[Object(f.jsx)(C.a,{className:"post-icon",title:"Like",onClick:i}),Object(f.jsx)("div",{children:r})]}),Object(f.jsxs)("div",{className:"post-icon-div",children:[Object(f.jsx)(C.c,{className:"post-icon",title:"Rebark",onClick:n}),Object(f.jsx)("div",{children:s})]})]})},E=function(e){var t=e.submitComment,n=e.updateComment,c=e.commentText;return Object(f.jsx)("div",{className:"comment-input",children:Object(f.jsxs)("form",{onSubmit:t,children:[Object(f.jsx)("input",{type:"text",onChange:n,value:c}),Object(f.jsx)("button",{type:"submit",children:"Reply"})]})})},I=function(e){var t=e.post,n=e.updateRebark,r=e.submitRebark,s=e.rebarkText,i=Object(c.useContext)(m).userInfo;return Object(f.jsx)("div",{className:"modal",children:Object(f.jsxs)("section",{className:"rebark-container modal-main",children:[Object(f.jsxs)("div",{className:"user-info",children:[Object(f.jsx)("img",{alt:"pic",src:i.url,className:"avatar-img"}),Object(f.jsx)("span",{className:"username",children:i.username})]}),Object(f.jsx)("div",{className:"post-input",children:Object(f.jsxs)("form",{onSubmit:r,children:[Object(f.jsx)("input",{type:"text",onChange:n,value:s}),Object(f.jsx)(S,{post:t}),Object(f.jsx)("button",{type:"submit",children:"Submit post"})]})})]})})},R=d.firestore(),H=function(e){var t=e.contents,n=e.post,r=e.view,s=Object(c.useContext)(m),i=s.userInfo,o=s.handleError,d=s.submitPost,b=Object(c.useState)(""),O=Object(l.a)(b,2),p=O[0],h=O[1],x=Object(c.useState)(""),v=Object(l.a)(x,2),g=v[0],k=v[1],N=Object(c.useState)(!1),y=Object(l.a)(N,2),w=y[0],C=y[1],H=Object(c.useState)(!1),V=Object(l.a)(H,2),G=V[0],M=V[1],P=Object(c.useState)(null),B=Object(l.a)(P,2),T=B[0],D=B[1],U=n.comments>0?n.comments:"",F=n.likedBy.length>0?n.likedBy.length:"",K=n.rebarkedBy.length>0?n.rebarkedBy.length:"",q=r?"".concat(r,"-container clickable"):"post-container clickable";function L(){return(L=Object(u.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.collection("contents").doc(n.id);case 3:return t=e.sent,e.next=6,t.update({comments:j.a.firestore.FieldValue.increment(1)});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function X(){return(X=Object(u.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.collection("contents").doc(n.id);case 3:e.sent.update({rebarkedBy:j.a.firestore.FieldValue.arrayUnion(i.uid)}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){var e;"rebark"===n.type&&t&&(e=t.find((function(e){return e.id===n.originalPostId}))),D(e)}()}),[t,n.originalPostId,n.type]),Object(f.jsxs)("div",{className:q,id:n.id,children:[Object(f.jsx)(S,{post:n,view:r}),T&&Object(f.jsx)(S,{post:T,view:"rebarked"}),Object(f.jsx)(A,{displayComment:function(){C(!0)},addLike:function(){R.collection("contents").doc(n.id).update({likedBy:j.a.firestore.FieldValue.arrayUnion(i.uid)}).catch((function(e){return o(e)}))},commentNumber:U,likesNumber:F,rebarkNum:K,displayRebark:function(){n.rebarkedBy.includes(i.uid)||M(!0)}}),w&&Object(f.jsx)(E,{submitComment:function(e){e.preventDefault(),function(){L.apply(this,arguments)}(),d(e,p,"comment",n.id),h(""),C(!1)},updateComment:function(e){h(e.target.value)},commentText:p}),G&&Object(f.jsx)(I,{post:n,updateRebark:function(e){k(e.target.value)},submitRebark:function(e){e.preventDefault(),function(){X.apply(this,arguments)}(),d(e,g,"rebark",n.id),k(""),M(!1)},rebarkText:g})]})},V=function(e){var t=e.contents,n=e.posts;return Object(f.jsx)("div",{className:"posts-container",children:n.map((function(e){return Object(f.jsx)(H,{post:e,contents:t},e.id)}))})},G=function(e){var t=e.contents,n=e.posts;return Object(f.jsxs)("div",{className:"center-container",children:[Object(f.jsx)(w,{}),Object(f.jsx)(V,{contents:t,posts:n})]})},M=function(e){var t=e.contents,n=Object(v.g)().uid,c=e.posts.filter((function(e){return e.uid===n}));return Object(f.jsx)("div",{className:"posts-container",children:c.map((function(e){return Object(f.jsx)(H,{post:e,contents:t},e.id)}))})},P=function(e){var t=Object(v.g)().uid,n=e.contents.filter((function(e){return e.likedBy.includes(t)}));return Object(f.jsx)("div",{className:"posts-container",children:n.map((function(e){return Object(f.jsx)(H,{post:e},e.id)}))})},B=n(36),T=d.firestore(),D=function(e){var t=e.uid,n=e.contents,r=Object(c.useContext)(m).handleError,s=Object(c.useState)(),i=Object(l.a)(s,2),o=i[0],a=i[1];return Object(c.useEffect)((function(){var e=T.collection("contents").where("type","==","comment").where("uid","==",t).orderBy("timestamp","asc").onSnapshot((function(e){!function(e){for(var c=[],r=[],s={},i=function(i){e&&(c=e.filter((function(e){return e.uid===t&&e.originalPostId===n[i].id}))).length>0&&(s=Object(g.a)(Object(g.a)({},n[i]),{},{commentData:Object(B.a)(c)}),r.push(s))},o=0;o<n.length;o++)i(o);a(r)}(e.docs.map((function(e){return Object(g.a)({id:e.id},e.data())})))}),(function(e){console.log(e),r(e)}));return function(){return e()}}),[r,n,t]),Object(f.jsx)("div",{className:"posts-container",children:o&&o.map((function(e){return Object(f.jsxs)("div",{className:"post-w-comments-container",children:[Object(f.jsx)(H,{post:e,contents:n,view:"comm-post"}),e.commentData.map((function(e){return Object(f.jsx)(H,{post:e,contents:n,view:"comment"},e.id)}))]},e.id)}))})},U=function(e){var t=e.contents,n=e.users,c=e.posts,r=Object(v.g)().uid,s=Object(v.h)(),i=s.url,o=s.path,a=n.find((function(e){return e.uid===r}));return Object(f.jsxs)("div",{className:"center-container",children:[Object(f.jsxs)("div",{className:"info-container",children:[Object(f.jsx)("div",{className:"profile-pic-div",children:Object(f.jsx)("img",{alt:"pic",src:a.url,className:"profile-pic"})}),Object(f.jsx)("h2",{className:"bio-username",children:a.username}),Object(f.jsxs)("div",{className:"follow-numbers",children:[Object(f.jsx)(x.b,{to:"/".concat(r,"/follow-page"),children:Object(f.jsxs)("div",{children:[a.following.length," following"]})}),Object(f.jsx)(x.b,{to:"/".concat(r,"/follow-page/followers"),children:Object(f.jsxs)("div",{className:"followers",children:[a.followers.length," followers"]})})]}),Object(f.jsx)("div",{className:"profile-tabs-container",children:Object(f.jsxs)("ul",{className:"profile-tabs",children:[Object(f.jsx)(x.b,{to:"".concat(i),children:Object(f.jsx)("li",{children:"Barks"})}),Object(f.jsx)(x.b,{to:"".concat(i,"/comments"),children:Object(f.jsx)("li",{children:"Comments"})}),Object(f.jsx)(x.b,{to:"".concat(i,"/likes"),children:Object(f.jsx)("li",{children:"Likes"})})]})})]}),Object(f.jsxs)(v.d,{children:[Object(f.jsx)(v.b,{exact:!0,path:"".concat(o),render:function(e){return Object(f.jsx)(M,Object(g.a)(Object(g.a)({},e),{},{contents:t,posts:c}))}}),Object(f.jsx)(v.b,{path:"".concat(o,"/comments"),render:function(e){return Object(f.jsx)(D,Object(g.a)(Object(g.a)({},e),{},{contents:t,uid:r}))}}),Object(f.jsx)(v.b,{path:"".concat(o,"/likes"),render:function(e){return Object(f.jsx)(P,Object(g.a)(Object(g.a)({},e),{},{contents:t}))}})]})]})},F=n(26),K=d.firestore(),q=function(e){var t=Object(c.useContext)(m).handleError,n=Object(v.g)().id,r=e.history,s=e.contents,i=Object(c.useState)(null),o=Object(l.a)(i,2),a=o[0],u=o[1],j=s.find((function(e){return e.id===n}));return Object(c.useEffect)((function(){var e=K.collection("contents").where("type","==","comment").where("originalPostId","==",n).orderBy("timestamp","asc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(g.a)({id:e.id},e.data())}));u(t)}),(function(e){console.log(e),t(e)}));return function(){return e()}}),[t,n]),Object(f.jsxs)("div",{className:"center-container",children:[Object(f.jsx)("div",{className:"arrow-left-container",children:Object(f.jsx)(F.a,{id:"arrow-left",onClick:function(){return r.goBack()}})}),Object(f.jsxs)("div",{className:"post-w-comments-container",children:[Object(f.jsx)(H,{post:j,contents:s,view:"comm-post"}),a&&a.map((function(e){return Object(f.jsx)(H,{post:e,view:"comment"},e.id)}))]},j.id)]})},L=d.firestore(),X=function(e){var t=e.user,n=e.currUser,r=Object(c.useContext)(m).handleError,s=n.following.includes(t.uid);return Object(f.jsxs)("div",{className:"user-tile",children:[Object(f.jsxs)("div",{className:"user-info",children:[Object(f.jsx)("img",{alt:"pic",src:t.url,className:"avatar-img"}),Object(f.jsx)(x.b,{to:"/profile/".concat(t.uid),className:"link-username",children:Object(f.jsx)("span",{className:"username",children:t.username})})]}),t.uid!==n.uid&&s&&Object(f.jsx)("button",{onClick:function(){L.collection("users").doc(t.uid).update({followers:j.a.firestore.FieldValue.arrayRemove(n.uid)}).catch((function(e){return r(e)})),L.collection("users").doc(n.uid).update({following:j.a.firestore.FieldValue.arrayRemove(t.uid)}).catch((function(e){return r(e)}))},children:"Unfollow"}),t.uid!==n.uid&&!s&&Object(f.jsx)("button",{onClick:function(){L.collection("users").doc(t.uid).update({followers:j.a.firestore.FieldValue.arrayUnion(n.uid)}).catch((function(e){return r(e)})),L.collection("users").doc(n.uid).update({following:j.a.firestore.FieldValue.arrayUnion(t.uid)}).catch((function(e){return r(e)}))},children:"Follow"})]})},Y=function(e){var t=e.users,n=Object(c.useContext)(m).userInfo,r=t.find((function(e){return e.uid===n.uid}));return Object(f.jsx)("div",{className:"center-container",children:t.filter((function(e){return e.uid!==n.uid})).map((function(e){return Object(f.jsx)(X,{user:e,currUser:r},e.uid)}))})},Z=function(e){var t=e.users,n=Object(v.g)().uid,r=Object(c.useContext)(m).userInfo,s=t.find((function(e){return e.uid===r.uid})),i=t.find((function(e){return e.uid===n})),o=[];return i.following.forEach((function(e){for(var n=0;n<t.length;n++)t[n].uid===e&&o.push(t[n])})),Object(f.jsx)("div",{className:"tiles-container",children:o.map((function(e){return Object(f.jsx)(X,{user:e,currUser:s},e.uid)}))})},Q=function(e){var t=e.users,n=Object(v.g)().uid,r=Object(c.useContext)(m).userInfo,s=t.find((function(e){return e.uid===r.uid})),i=t.find((function(e){return e.uid===n})),o=[];return i.followers.forEach((function(e){for(var n=0;n<t.length;n++)t[n].uid===e&&o.push(t[n])})),Object(f.jsx)("div",{className:"tiles-container",children:o.map((function(e){return Object(f.jsx)(X,{user:e,currUser:s},e.uid)}))})},J=function(e){var t=e.history,n=e.users,c=Object(v.g)().uid,r=Object(v.h)(),s=r.url,i=r.path,o=n.find((function(e){return e.uid===c}));return Object(f.jsxs)("div",{className:"center-container",children:[Object(f.jsx)("div",{className:"arrow-left-container",children:Object(f.jsx)(F.a,{id:"arrow-left",onClick:function(){return t.goBack()}})}),Object(f.jsx)("h2",{children:o.username}),Object(f.jsx)("div",{className:"profile-tabs-container",children:Object(f.jsxs)("ul",{className:"profile-tabs",children:[Object(f.jsx)(x.b,{to:"".concat(s),children:Object(f.jsx)("li",{children:"Following"})}),Object(f.jsx)(x.b,{to:"".concat(s,"/followers"),children:Object(f.jsx)("li",{children:"Followers"})})]})}),Object(f.jsxs)(v.d,{children:[Object(f.jsx)(v.b,{exact:!0,path:"".concat(i),render:function(e){return Object(f.jsx)(Z,Object(g.a)(Object(g.a)({},e),{},{users:n}))}}),Object(f.jsx)(v.b,{path:"".concat(i,"/followers"),render:function(e){return Object(f.jsx)(Q,Object(g.a)(Object(g.a)({},e),{},{users:n}))}})]})]})},W=d.firestore(),z=function(){var e=Object(c.useContext)(m).handleError,t=Object(v.h)().path,n=Object(c.useState)([]),r=Object(l.a)(n,2),s=r[0],i=r[1],o=Object(c.useState)([]),a=Object(l.a)(o,2),u=a[0],j=a[1],d=Object(c.useState)([]),b=Object(l.a)(d,2),O=b[0],p=b[1];return Object(c.useEffect)((function(){var t=W.collection("contents").orderBy("timestamp","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(g.a)({id:e.id},e.data())}));i(t);var n=t.filter((function(e){return"post"===e.type||"rebark"===e.type}));j(n)}),(function(t){console.log(t.code),e(t)}));return function(){return t()}}),[e]),Object(c.useEffect)((function(){var t=W.collection("users").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(g.a)({uid:e.id},e.data())}));p(t)}),(function(t){console.log(t.code),e(t)}));return function(){return t()}}),[e]),Object(c.useEffect)((function(){})),Object(f.jsxs)("div",{className:"home-container",children:[Object(f.jsx)(k,{}),Object(f.jsxs)("div",{className:"app-container",children:[Object(f.jsx)(y,{}),Object(f.jsxs)(v.d,{children:[Object(f.jsx)(v.b,{exact:!0,path:"/home",render:function(e){return Object(f.jsx)(G,Object(g.a)(Object(g.a)({},e),{},{contents:s,posts:u}))}}),Object(f.jsx)(v.b,{path:"".concat(t,"profile/:uid"),render:function(e){return Object(f.jsx)(U,Object(g.a)(Object(g.a)({},e),{},{contents:s,posts:u,users:O}))}}),Object(f.jsx)(v.b,{path:"".concat(t,":uid/follow-page"),render:function(e){return Object(f.jsx)(J,Object(g.a)(Object(g.a)({},e),{},{users:O}))}}),Object(f.jsx)(v.b,{path:"".concat(t,"barkers"),render:function(e){return Object(f.jsx)(Y,Object(g.a)(Object(g.a)({},e),{},{users:O}))}}),Object(f.jsx)(v.b,{path:"".concat(t,"post/:id"),render:function(e){return Object(f.jsx)(q,Object(g.a)(Object(g.a)({},e),{},{contents:s}))}})]})]})]})},_=function(){var e=Object(c.useContext)(m),t=e.signInAnonymous,n=e.updateAnonName;return Object(f.jsx)("div",{className:"modal",children:Object(f.jsx)("section",{className:"modal-main",children:Object(f.jsxs)("form",{onSubmit:t,children:[Object(f.jsx)("input",{type:"text",placeholder:"choose a username",onChange:n}),Object(f.jsx)("button",{type:"submit",children:"Sign In Anonymously"})]})})})},$=function(){var e=Object(c.useContext)(m),t=e.userLoggedIn,n=e.signIn,r=e.showSignInModal,s=e.signInModal;return Object(f.jsx)("div",{id:"login-page",children:Object(f.jsx)("div",{id:"login-btns",children:!t&&Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{onClick:n,children:"Log in with Google"}),Object(f.jsx)("button",{onClick:r,children:"Log In Anonimously"}),s&&Object(f.jsx)(_,{})]})})})},ee=function(){var e=Object(c.useContext)(m),t=e.error,n=e.closeError;return Object(f.jsx)("div",{className:"modal",children:Object(f.jsxs)("section",{className:"modal-main",children:[Object(f.jsx)("div",{className:"error-message",children:t}),Object(f.jsx)("button",{onClick:n,children:"OK"})]})})};var te=function(){var e=Object(c.useContext)(m),t=e.userLoggedIn,n=e.showError;return Object(f.jsxs)(x.a,{children:[Object(f.jsx)(v.b,{exact:!0,path:"/login",children:t?Object(f.jsx)(v.a,{to:"/home"}):Object(f.jsx)($,{})}),Object(f.jsxs)(v.b,{path:"/",children:[t?Object(f.jsx)(z,{}):Object(f.jsx)(v.a,{to:"/login"})," "]}),n&&Object(f.jsx)(ee,{})]})};i.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(h,{children:Object(f.jsx)(te,{})})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.8f2d41a4.chunk.js.map